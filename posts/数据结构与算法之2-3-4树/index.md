---
title: "数据结构与算法之2-3-4树"
slug: "salgo-234tree"
date: 2021-02-01T14:09:53+08:00
lastmod: 2021-02-01T14:09:53+08:00
author: bbing
draft: true
math: true
tags: ["Cpp", "二叉树", "2-3-4树", "平衡树"]
categories: ["数据结构与算法"]
---

https://s3.ax1x.com/2021/02/01/yeQZ0e.png

## 平衡树

![不太平衡的二叉树](https://s3.ax1x.com/2021/01/29/yi2tDs.png "不太平衡的二叉树")

对于一个普通的二叉查找树, 我们可以发现一个问题, 存在一定的可能性, 一般的二叉查找树会退化成一般的链表.

上图还没有完全退化, 但是如果查找6这个结点, 会比其他的叶子结点走更多的路程.

为了解决一般二叉查找树可能带来的退化问题, 引入了平衡树的概念.

> 完全二叉树和满二叉树是平衡树.

平衡树的定义就是: **左右子树的高度差不大于1的树.**

## 2-3-4树

![2-3-4树](https://s3.ax1x.com/2021/02/01/yeQZ0e.png "2-3-4树")

2-3-4树的意思就是二叉/三叉/四叉树.

简单起见, 可以把2-3-4树定义为四叉树, 一个结点可以存储三个元素和四个孩子结点的指针.

如上图, 先约定左中右三个元素代号是```A```, ```B```, ```C```; 从左到右的四个孩子结点的指针是```a```, ```b```, ```c```, ```d```.

可以看到, 每个结点元素不一定要填满, 每个子结点指针也不一定要填满.

## 查找

和二叉查找树类似, 每个结点的子树也是根据元素与结点大小划分的.

- ```a```指向```P < A```的子树;
- ```b```指向```A < P < B```的子树;
- ```c```指向```B < P < C```的子树;
- ```d```指向```C < P```的子树;

所以, 查找一个结点的时候, 根据被查找元素```P```与```A```/```B```/```C```的大小关系, 走不同的路径来查找元素.

![2-3-4树-查找](https://s3.ax1x.com/2021/02/01/yeQiSx.png "2-3-4树-查找")

## 插入

对2-3-4树的插入操作需要分类讨论, 根据不同的情况需要做对应对调整, 使插入后的树依然保持平衡.

### 插入结点是不满的叶子结点

![2-3-4树-直接插入](https://s3.ax1x.com/2021/02/01/yeQVmD.png "2-3-4树-直接插入")

对插入结点是不满的叶子结点的情况, 和查找元素类似, 根据大小关系找到被插入元素在树中的位置, 因为结点没有插入满, 所以元素可以直接插入.

### 插入结点是满的叶子结点

![2-3-4树-插入满叶子结点](https://s3.ax1x.com/2021/02/01/yeQAOO.png "2-3-4树-插入满叶子结点")

如果发现插入的结点是满叶子结点, 则需要进行调整.

首先, A元素不动.

#### 调整B元素

我们仅截取需要调整对那颗子树.

![2-3-4树-调整B元素](https://s3.ax1x.com/2021/02/01/yeQk6K.png "2-3-4树-调整B元素")

将B元素插入到父结点;

#### 调整C元素

![2-3-4树-调整C元素](https://s3.ax1x.com/2021/02/01/yeQFl6.png "2-3-4树-调整C元素")

新建一个被调整结点对兄弟结点. 将C元素插入兄弟结点.

所以, 最终的插入结果是

![2-3-4树-插入后](https://s3.ax1x.com/2021/02/01/yeQ9YR.png "2-3-4树-插入后")

### 插入结点是满的非叶子结点

![2-3-4树-插入满非叶子结点](https://s3.ax1x.com/2021/02/01/yeMzTJ.png "2-3-4树-插入满非叶子结点")

如果发现插入的结点是满非叶子结点, 情况稍微复杂一点, 需要考虑被调整结点的子结点.

同样, A元素不动.

#### 调整B元素

![2-3-4树-调整B元素](https://s3.ax1x.com/2021/02/01/yeQpk9.png "2-3-4树-调整B元素")

如果被调整结点没有父结点, 则新建一个父结点, 将B元素插入父结点.(也就是说, 被调整结点是根结点.)

如果被调整结点有父结点, 则将B元素插入父结点.

#### 调整C元素

![2-3-4树-调整C元素](https://s3.ax1x.com/2021/02/01/yeQCf1.png "2-3-4树-调整C元素")

新建一个被调整结点对兄弟结点. 将C元素插入兄弟结点.

同时, 将```c```, ```d```也插入到兄弟结点.(这个可以理解为C带着他的左右孩子一起插入到兄弟结点, A带着他的左右孩子一起留在原来的结点)

## 删除

## 2-3-4树为什么可以保持平衡